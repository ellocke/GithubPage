<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>BerlinR: Pragmatic GIS with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Ilja | @fubits" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="css\xarigan_custom_v2.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# BerlinR: Pragmatic GIS with R
## Tidy Approaches to Spatial Data
### Ilja | <a href="https://twitter.com/fubits"><span class="citation">@fubits</span></a>
### BerlinR Meetup, 2019-11-27

---






class: inverse

.pull-left[

# Outline

.TOC[
1. State of &lt;a href="#"&gt;#Rspatial&lt;/a&gt;
1. Recap: GIS basics
1. Demo / Walkthrough
1. Readings
]

]

???
Goal: Pragmatism. Know enough to be able to produce.
Not a goal: Design Theory &amp; Cartography

---
class: inverse

# About Me

+ Ilja | &lt;a href="https://twitter.com/fubits"&gt;@fubits&lt;/a&gt;
--

+ Dev &amp; Data Person @ &lt;a href="https://rankingdigitalrights.org/index2019/"&gt;New America / Ranking Digital Rights&lt;/a&gt;
--

+ Freelance  4 Non-Profits (&lt;a href="https://dadascience.design/portfolio/"&gt;dadascience.design/portfolio&lt;/a&gt;)
--

  + Data Management
  + DataViz &amp; InfoViz; Spatial / Maps ‚ù§Ô∏è
  + Frontend / Backend, Research Software Engineering
  + ~~Design Thinking~~ Human-Centered Design ([ISO 9214](https://en.wikipedia.org/wiki/ISO_9241))
--

+ üîç Journey: Product Design / Strategy

???
Questionaire?
- Tidyverse?
- Geodata
- sf package

---
class: inverse

# Mid-2017

.bigpicture-two-thirds[![](img/china_map.png)]
--

.pull-left[
+ Base R
+ Spatial{X}DataFrame
+ plot()

[50% in dirty R...](https://dadascience.design/post/r-low-budget-high-res-mapping-with-r-for-not-for-profit-print/)

```r
asia_core &lt;-  spRbind(
                spRbind(
                  spRbind(asia_china,
                  asia_east),
                     asia_seast),
                        asia_censouth)
asia_core@bbox[1] &lt;- leftBorder
plot(asia_core)
```
]

---
class: inverse

## 2017/2018: sf - The Tidy Turn

.center[.flex[![](https://user-images.githubusercontent.com/520851/34887433-ce1d130e-f7c6-11e7-83fc-d60ad4fae6bd.gif) &lt;span style="font-size:5em; vertical-align: top"&gt;+&lt;/span&gt; ![](https://avatars1.githubusercontent.com/u/22032646?s=200&amp;v=4)]
]

.pull-center[
+ [github.com/r-spatial/](https://github.com/r-spatial/)
  + sf üì¶ := (tidy) implementation of the [Simple Features open standard](https://en.wikipedia.org/wiki/Simple_Features)
  + mapview üì¶ + mapedit üì¶
  + stars üì¶
  ]

---
class: inverse

# Early 2019

.bigpicture-two-thirds[![](img/gppi_syria.jpg)]
--

.pull-left[
Report:&lt;br/&gt;
[Schneider/L√ºtkefend 2019](https://www.gppi.net/2019/02/17/the-logic-of-chemical-weapons-use-in-syria)
]

---
class: inverse

# Early 2019

.bigpicture-right[![](img/gppi_syria.png)]
--

.pull-left[80% in R...] 
---
class: inverse

# Mid-2019
.bigpicture-right[![](img/granica_cembrago.jpg)]
--

(Report on Security Forces in&lt;br&gt;Afghanistan; forthcoming)

95% R :=

.list-regular[
+ üì¶ sf
+ üì¶ geojsonsf
+ üì¶ elevatr üôè --&gt; SRTM
+ üì¶ rayshader üî•
+ üì¶ fuzzyjoin
+ open data
]

???
Why not QGIS?
---
class: inverse, center

.bigpicture-centre[![](img/granica_cembrago.jpg)]
???
Because: Automation

---
class: inverse, center, middle

.subtitle-slide[
# Status Quo in R
]


---
class: inverse

## #Rspatial

.bigpicture-right[![](img/ternary_ilya_kashnitsky.jpg)]
.source[Repo:&lt;br&gt;[github.com/ikashnitsky](https://github.com/ikashnitsky/the-lancet-2018)]

---
class: inverse

## #30daymapchallenge 2019

--

.pull-left[.bigpicture[![](img/30daymapchallenge_1.jpg)]]
--
.bigpicture-right[![](img/30daymapchallenge_2.jpg)]

---
class: inverse

## Rayshader + LiDAR (pt. 1)

.bigpicture-centre[![](img/rayshader_1.jpg)]

.source[Sources: [tylermorganwall/rayshader üì¶
](https://github.com/tylermorganwall/rayshader); [MUSA Masterclass üî•](https://github.com/tylermorganwall/MusaMasterclass)]

---
class: inverse, center

.bigpicture-centre[![](img/rayshader_2.jpg)]

---
class: inverse

## And mooooreee: WebGL / deck.gl / mapdeck / leafgl

.img-block[
![](https://dadascience.design/img/GIS_workflow/mapdeck_top.gif)
![](https://dadascience.design/img/GIS_workflow/mapdeck_bottom.gif)
]

.source[Sources: [SymbolixAU/mapdeck](https://symbolixau.github.io/mapdeck/articles/layers.html) üì¶; cf. [r-spatial/leafgl](https://github.com/r-spatial/leafgl)üì¶]

---
class: inverse

# #30daymapchallenge 2019

.center[![](img/30-day-map-challenge.jpeg)]

.source[Source: [Topi @tjukanov](https://twitter.com/tjukanov/status/1187713840550744066)]


---
class: inverse
# Recap: GIS basics

--

.bigpicture-right[![](img/campbell-fig01_012.jpg)]

.source[(Most probable image source: &lt;a href="//commons.wikimedia.org/wiki/User:Gegensystem" title="User:Gegensystem"&gt;Andreas E. Neuhold&lt;/a&gt;, &lt;a href="https://creativecommons.org/licenses/by/3.0" title="Creative Commons Attribution 3.0"&gt;CC BY 3.0&lt;/a&gt;, &lt;a href="https://commons.wikimedia.org/w/index.php?curid=33542838"&gt;Link&lt;/a&gt;)]

--

.pull-left[
+ {Point, Line, Polygon}, {Pixel}
+ Projection / CRS
+ Object Relations and Set Operations (~ SQL, but with paper &amp; ‚úÇÔ∏è)
]

---
class: inverse
# Recap: Vectors

.bigpicture-right[![](https://datacarpentry.org/organization-geospatial/fig/dc-spatial-vector/pnt_line_poly.png)]

+ points, sequences of points,&lt;br&gt;collections of &lt;br&gt;
sequenences of points ("multi")
+ everything (!) has a **square &lt;br&gt;bounding box** [BBOX]
+ slighly messy: polygons with&lt;br&gt; holes
+ üì¶ sf

.source[Image source: [Data Carpentry](https://datacarpentry.org/organization-geospatial/02-intro-vector-data/), CC BY 4.0]

---
class: inverse

# Recap: Rasters

.bigpicture-right[
![](img/raster_concept.png)
]

+ grid / matrix
+ can have layers
  + 1 layer = 1 variable&lt;br&gt;
  (height, sensor, R/G/B)
+ üì¶ raster &amp; üì¶ stars
+ crop; mask; transform
+ GeoTiff
+ (üì¶ [tidync: NetCDF](https://ropensci.org/blog/2019/11/05/tidync/))

.source[Image source: [Data Carpentry](https://datacarpentry.org/organization-geospatial/02-intro-vector-data/), CC BY 4.0]

---
class: inverse
# Recap: Spatial ‚à™ Relations

.bigpicture-two-thirds[![](https://upload.wikimedia.org/wikipedia/commons/5/55/TopologicSpatialRelarions2.png)]

.pull-left[
+ two-way relations:
  + a contains b
  + b contained by a&lt;br&gt;(b is within a)
+ challenge: 100% precision
+ mighy: [sf cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/sf.pdf)
]

.source[Source: &lt;a href="https://commons.wikimedia.org/wiki/File:TopologicSpatialRelarions2.png"&gt;Krauss&lt;/a&gt;, &lt;a href="https://creativecommons.org/licenses/by-sa/3.0"&gt;CC BY-SA 3.0&lt;/a&gt;]

---

class: inverse, center, middle

.subtitle-slide[
# Walkthrough / Demo
]

---
class: inverse

# Case: Close the Gap

.pull-left-one-third[Our team won the [mobility challenge at the 2019 Climathon in Berlin](https://climathon.climate-kic.org/en/challenges/mobility/new-mobility) with this prototype.&lt;br&gt;&lt;br&gt;
Techinical proof-of-concept: we classified every single bike lane segment in Berlin based on air quality, accident, and traffic probe data.&lt;br&gt;
&lt;br&gt;
Repo: [climathon-2019/R](https://github.com/leonardlorenz/climathon-2019/tree/master/R)
]

.bigpicture-two-thirds[![](https://raw.githubusercontent.com/leonardlorenz/climathon-2019/master/screenshot.png)]

---
class: inverse

# Readings

.bigpicture-right[![](img/gecomputation_with_r.jpg)]

+ [Lovelace / Nowosad / Muenchow (2019)](https://geocompr.robinlovelace.net/)
--

+ follow [Michael Sumner / @mdsumner](https://twitter.com/mdsumner)
  + Example: [R spatial in 2017](https://mdsumner.github.io/2017/01/10/spatial-r-2017.html)
--

+ [GIS like it's 2019 (me) ](https://dadascience.design/post/r-gis-like-it-s-2019-pragmatic-workflows-pt-1/)
 &lt;- more resources, &lt;br&gt; readings, and recipes

---
class: inverse, center, middle

.key-text-red[
# Questions?
]

Slides: [dadascience.design/talks](https://dadascience.design/talks)

Reach out: [@fubits](https://twitter.com/fubits)

___

[CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) (my stuff only, of course)

Slides created with [**xaringan**](https://github.com/yihui/xaringan).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"chakra": "libs/remark-latest.min.js"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
