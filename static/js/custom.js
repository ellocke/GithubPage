// custom Active-Link function

jQuery(function () {
    var page = location.pathname.split('/')[1];
    if (page == "") {page = "home"};
    if (page == "post") {page = "posts"};
    if (page == "tags" | page == "categories") {page = "topics"};
    $('nav ul a').each(
      function() {
      if (page == this.id.toLowerCase()) {
        $(this).addClass('menu-active');
        }
      })
})

// make data.table htmlwidget scrollable

function iframeOn() {
  if(document.getElementById("dtdatatable")){
      document.getElementById("dtdatatable").getElementsByTagName("iframe")[0].getAttributeNode("scrolling").value = "yes"
  }
}

jQuery(function () {
  $("pre").addClass("r");
})

// function for wrapping div>table generated by knitr::kable("html")

jQuery(function () {
  $("div>table").wrap( "<div class='tablediv'></div>" );
})

// When user scrolls down 50px from the top of the document, resize the header's padding & margins

window.onscroll = function() {scrollFunction()};

function scrollFunction() {
//   var hdrWidth = document.getElementById("header").clientWidth;
 /*  console.log(hdrWidth); */
  if (document.getElementById("header").clientWidth > 780) {
    if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
      document.getElementById("header").style.paddingTop = "2px";
      document.getElementsByClassName("logo-wrapper")[0].style.marginTop = "7px";
      document.getElementsByClassName("logo-wrapper")[0].style.marginBottom = "3px";
      document.getElementsByClassName("menu")[0].style.marginTop = "13px"
      document.getElementsByClassName("menu")[0].style.marginBottom = "9px"
    } else {
      document.getElementById("header").style.paddingTop = ""; // "" -> default, else: div.style.removeProperty('zoom');
      document.getElementsByClassName("logo-wrapper")[0].style.marginTop = "";
      document.getElementsByClassName("logo-wrapper")[0].style.marginBottom = "";
      document.getElementsByClassName("menu")[0].style.marginTop = "";
      document.getElementsByClassName("menu")[0].style.marginBottom = ""
    }
  }

  if(location.pathname.split('/')[1] == "post" & location.pathname.split('/')[2].length > 0) {
    var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    var scrolled = (winScroll / height) * 100;
    document.getElementById("progress-bar").style.width = scrolled + "%";
  }
}

// <!-- custom Ende -->
